<div class="video-player" id="video-player">
    <video id="video" width="640" height="360" src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" preload="metadata"></video>
    <div class="controls">
        <button id="play-btn" class="play-btn">â–¶</button>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-filled"></div>
                <div class="progress-handle"></div>
            </div>
            <div class="preview-thumbnail" id="preview-thumbnail"></div>
        </div>
        <div class="time-display">0:00</div>
        <button id="fullscreen-btn" class="fullscreen-btn">â›¶</button>
    </div>
</div>
<style>
    .video-player {
        position: relative;
        width: 640px;
        background: black;
    }

    video {
        display: block;
        width: 100%;
    }

    .controls {
        position: absolute;
        bottom: 10px;
        left: 10px;
        right: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        color: yellow;
        font-family: Arial, sans-serif;
    }

    .play-btn, .fullscreen-btn {
        background: none;
        border: none;
        color: yellow;
        font-size: 20px;
        cursor: pointer;
        user-select: none;
    }

    .fullscreen-btn {
        margin-left: auto;
        font-size: 22px;
    }

    .progress-container {
        flex-grow: 1;
        height: 10px;
        background: white;
        border-radius: 5px;
        cursor: pointer;
        position: relative;
    }

    .progress-bar {
        width: 100%;
        height: 100%;
        position: relative;
        background: white;
        border-radius: 5px;
    }

    .progress-filled {
        background: red;
        height: 100%;
        width: 0%;
        border-radius: 5px 0 0 5px;
    }

    .progress-handle {
        position: absolute;
        top: 50%;
        left: 0%;
        transform: translate(-50%, -50%);
        width: 14px;
        height: 14px;
        background: red;
        border-radius: 50%;
        pointer-events: none;
    }

    /* í”„ë¦¬ë·° ì¸ë„¤ì¼ ì°½ ìŠ¤íƒ€ì¼ (íƒ€ì¼ 1ê°œ í¬ê¸°ì™€ ì¼ì¹˜) */
    .preview-thumbnail {
        display: none;
        position: absolute;
        bottom: 18px;
        width: 312px;
        height: 176px;
        background: #222;
        border: 2px solid #fff;
        border-radius: 6px;
        overflow: hidden;
        pointer-events: none;
        z-index: 10;
        background-repeat: no-repeat;
        background-size: 936px 528px; /* ì „ì²´ ìŠ¤í”„ë¼ì´íŠ¸ í¬ê¸° */
    }

    .time-display {
        color: yellow;
        font-size: 14px;
        min-width: 40px;
        text-align: right;
        user-select: none;
    }

    /* ì „ì²´í™”ë©´ ëª¨ë“œ: ì›ë³¸ í¬ê¸° ì¤‘ì•™ ì •ë ¬, ì£¼ë³€ì€ ê²€ì€ìƒ‰ */
    .video-player.fullscreen {
        position: fixed !important;
        top: 0; left: 0; right: 0; bottom: 0;
        width: 100vw !important;
        height: 100vh !important;
        background: #000;
        z-index: 9999;
    }

    .video-player.fullscreen video {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover; /* ì¤‘ìš”: ë¹„ë””ì˜¤ê°€ í™”ë©´ì„ ê°€ë“ ì±„ì›€ */
    }

</style>
<script>
    const video = document.getElementById('video');
    const playBtn = document.getElementById('play-btn');
    const progressFilled = document.querySelector('.progress-filled');
    const progressHandle = document.querySelector('.progress-handle');
    const progressContainer = document.querySelector('.progress-container');
    const timeDisplay = document.querySelector('.time-display');
    const previewThumbnail = document.getElementById('preview-thumbnail');
    const fullscreenBtn = document.getElementById('fullscreen-btn');
    const videoPlayer = document.getElementById('video-player');

    // ì‹œê°„(ì´ˆ)ì„ mm:ss ë¬¸ìì—´ë¡œ ë³€í™˜
    function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // ì¬ìƒë°”ì™€ ì‹œê°„ í‘œì‹œ ê°±ì‹ 
    function updateProgress() {
    const percent = (video.currentTime / video.duration) * 100;
    progressFilled.style.width = percent + '%';
    progressHandle.style.left = percent + '%';
    timeDisplay.textContent = formatTime(video.currentTime);
    }

    // ì¬ìƒ/ì¼ì‹œì •ì§€ ë²„íŠ¼ ë™ì‘
    playBtn.addEventListener('click', () => {
    if (video.paused || video.ended) {
    if (video.ended) {
    video.currentTime = 0;
    }
    video.play();
    playBtn.textContent = 'â¸';
    } else {
    video.pause();
    playBtn.textContent = 'â–¶';
    }
    });

    // ì˜ìƒ ì¬ìƒ ì¤‘ì¼ ë•Œë§ˆë‹¤ ì¬ìƒë°” ê°±ì‹ 
    video.addEventListener('timeupdate', updateProgress);

    // ì¬ìƒë°” í´ë¦­ ì‹œ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™
    progressContainer.addEventListener('click', (e) => {
    const rect = progressContainer.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    const width = rect.width;
    const newTime = (clickX / width) * video.duration;
    video.currentTime = newTime;
    updateProgress();
    });

    // ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ (íƒ€ì¼ 1ê°œ í¬ê¸°ì™€ ì¼ì¹˜, ì¤‘ì•™ ì •ë ¬, ê²½ê³„ ì²´í¬)
    progressContainer.addEventListener('mousemove', (e) => {
    const rect = progressContainer.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const containerWidth = rect.width;
    const thumbnailWidth = 312;
    const thumbnailHeight = 176;
    const hoverTime = (mouseX / containerWidth) * video.duration;

    let thumbnailNumber = Math.floor(hoverTime / 27) + 1;
    thumbnailNumber = Math.min(thumbnailNumber, 15).toString().padStart(3, '0');

    const tileIndex = Math.floor((hoverTime % 27) / 3);
    const row = Math.floor(tileIndex / 3);
    const column = tileIndex % 3;

    const xPos = -column * 312;
    const yPos = -row * 176;

    previewThumbnail.style.backgroundImage =
    `url('https://d16ufd393m7gss.cloudfront.net/public/movie/536d75f1-754b-4888-8575-9d733d8c6886/Thumbnail_000000${thumbnailNumber}.jpg')`;
    previewThumbnail.style.backgroundPosition = `${xPos}px ${yPos}px`;
    previewThumbnail.style.backgroundSize = '936px 528px';

    let left = mouseX - (thumbnailWidth / 2);
    if (left < 0) {
    left = 0;
    } else if (left + thumbnailWidth > containerWidth) {
    left = containerWidth - thumbnailWidth;
    }
    previewThumbnail.style.left = `${left}px`;
    previewThumbnail.style.display = 'block';
    });

    // ë§ˆìš°ìŠ¤ê°€ ì¬ìƒë°”ë¥¼ ë²—ì–´ë‚˜ë©´ í”„ë¦¬ë·° ì°½ ìˆ¨ê¹€
    progressContainer.addEventListener('mouseleave', () => {
    previewThumbnail.style.display = 'none';
    });

    // ì˜ìƒ ë©”íƒ€ë°ì´í„°ê°€ ë¡œë“œë˜ë©´ ì´ˆê¸°í™”
    video.addEventListener('loadedmetadata', () => {
    timeDisplay.textContent = formatTime(0);
    updateProgress();
    });

    // ==================== ì „ì²´í™”ë©´ ê¸°ëŠ¥ ====================

    // ì „ì²´í™”ë©´ í† ê¸€ í•¨ìˆ˜ (í‘œì¤€ + ì£¼ìš” ë¸Œë¼ìš°ì € ì§€ì›)
    function toggleFullscreen() {
    if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement && !document.msFullscreenElement) {
    if (videoPlayer.requestFullscreen) {
    videoPlayer.requestFullscreen();
    } else if (videoPlayer.webkitRequestFullscreen) {
    videoPlayer.webkitRequestFullscreen();
    } else if (videoPlayer.mozRequestFullScreen) {
    videoPlayer.mozRequestFullScreen();
    } else if (videoPlayer.msRequestFullscreen) {
    videoPlayer.msRequestFullscreen();
    }
    } else {
    if (document.exitFullscreen) {
    document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
    } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
    } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
    }
    }
    }

    // ì „ì²´í™”ë©´ ë²„íŠ¼ í´ë¦­ ì‹œ ì „ì²´í™”ë©´ í† ê¸€
    fullscreenBtn.addEventListener('click', toggleFullscreen);

    // ì „ì²´í™”ë©´ ìƒíƒœ ë³€ê²½ ì‹œ ì•„ì´ì½˜ ë° ìŠ¤íƒ€ì¼ ë³€ê²½
    function onFullscreenChange() {
    if (
    document.fullscreenElement === videoPlayer ||
    document.webkitFullscreenElement === videoPlayer ||
    document.mozFullScreenElement === videoPlayer ||
    document.msFullscreenElement === videoPlayer
    ) {
    videoPlayer.classList.add('fullscreen');
    fullscreenBtn.textContent = 'ğŸ¡¼';
    } else {
    videoPlayer.classList.remove('fullscreen');
    fullscreenBtn.textContent = 'â›¶';
    }
    }

    // ë¸Œë¼ìš°ì €ë³„ ì „ì²´í™”ë©´ ë³€ê²½ ì´ë²¤íŠ¸ ë“±ë¡
    document.addEventListener('fullscreenchange', onFullscreenChange);
    document.addEventListener('webkitfullscreenchange', onFullscreenChange);
    document.addEventListener('mozfullscreenchange', onFullscreenChange);
    document.addEventListener('MSFullscreenChange', onFullscreenChange);

    // ë¹„ë””ì˜¤ ë”ë¸”í´ë¦­ ì‹œ ì „ì²´í™”ë©´ í† ê¸€
    video.addEventListener('dblclick', toggleFullscreen);

</script>